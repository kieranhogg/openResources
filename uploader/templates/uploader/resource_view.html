{% extends 'uploader/base.html' %}
{% load static %}
{% block body_block %}

<!-- FIXME all this sucky conditional stuff should be in the view -->
<h2>
    {% if resource.file %}
        {{ resource.file.title }}
    {% else %}
        {{ resource.bookmark.title }}
    {% endif %}
</h2>
<div id="resource_details">
    <div id="syllabus">Suitable for: <strong>{{ resource.syllabus }}</strong></div>
    <div id="rating">{{ rating }}</div>
    <div id="uploader">
        {% if resource.file %}
            {{ resource.file.uploader }}
        {% else %}
            {{ resource.bookmark.uploader }}
        {% endif %}
    </div>
    <div id="topics">
        {% if resource.topics.all %}
        <p>Topics: 
            {% for topic in resource.topics.all %}
                {% if not forloop.first %}
                {% if forloop.last %} &amp; {% else %}, {% endif %}
                {% endif %}
                <strong>{{ topic }}</strong>
            {% endfor %}
        </p>
        {% endif %}
    </div>
</div>
<!--<hr />-->
<div id="description">
    {% if resource.file %}
        {{ resource.file.description }}
    {% else %}
        {{ resource.bookmark.description }}
    {% endif %}
</div>

{% if resource.file %}
    <div id="author">Resource created by 
    {% if resource.file.author == 'me' %}
    <a href="{{ resource.file.author_link }}">{{ resource.file.uploader }}</a>
    {% endif %}
    under 
    <a href="{{ resource.licence.link }}">{{ resource.file.licence }} licence</a></div>
{% endif %}
<div id="published">Uploaded {{ resource.pub_date }}</div>

<div class="action">
    {% if resource.file %}
    <a href='{{ MEDIA_URL }}{{ resource.file.file }}'>Download</a>
    {% else %}
        <div id="link">
            <a href='{{ resource.bookmark.link }}'>Open link</a>
        </div>
    {% endif %}
</div>
{% endblock %}
