{% extends 'uploader/base.html' %}
{% block body_block %}
{% load static %}
<h2>{% block head_title %}My Resources{% endblock %}</h2>
{% if resources %}
<h3>Resource</h3>
<p>A resource is a copy of a file or bookmark added to a syllabus, unit or unit
topic. Below is the list of of resources you have added.</p>
<h3>Linking/Unlinking</h3>
<p>Linking makes another copy of a resource and adds it to another syllabus, unit
or unit topic. Unlinking removes the copy but will keep the original file or bookmark.</p>
<p>If you are looking to edit or delete a file or bookmark, you can do so on 
their own page.</p>
<hr />
<!--<div class="table-responsive">-->
<table class='table'>
    <tr>
        <th></th>
        <th width="16%">Title</th>
        <th>Rating</th>
        <th>Subject</th>
        <th>Syllabus</th>
        <th>Unit</th>
        <th>Unit Topic</th>
        <th></th>
    </tr>
    <tbody>

    {% for resource in resources %}
    <tr> 
        {% if resource.file %}
        <td><span class="glyphicon glyphicon-paperclip" aria-hidden="true"></span></td>
        {% else %}
        <td>
            <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span></td>
        {% endif %}
        <td><a href="{% url 'uploader:view_resource' resource.slug %}">{{ resource }}</a></td>
        <td style='text-align: center'>{{ resource.rating }}</td></t>
        <td>{{ resource.subject }}</td>
        <td>
            <a href="{% url 'uploader:syllabus' resource.syllabus.subject.slug resource.syllabus.exam_level.slug resource.syllabus.slug %}">
            {{ resource.syllabus }}
            </a>
        </td>
        <td>
            {% if resource.unit %}
            <a href="{% url 'uploader:unit' resource.syllabus.subject.slug resource.syllabus.exam_level.slug resource.syllabus.slug resource.unit.slug %}">
            {{ resource.unit }}
            </a>
            {% else %} {{ resource.unit }}
            {% endif %}
        </td>
        <td>
            {% if resource.unit_topic %}
            <a href="{% url 'uploader:unit_topic' resource.syllabus.subject.slug resource.syllabus.exam_level.slug resource.syllabus.slug resource.unit.slug resource.unit_topic.slug %}">
            {{ resource.unit_topic }}
            </a>
            {% else %} {{ resource.unit_topic }}
            {% endif %}
        </td>
        <td>
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                Actions <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="{% url 'uploader:add_item_to_lesson' resource.slug 'resource' %}">
                    <span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span>
                    Add to lesson
                    </a></li>
                <li>
                {% if resource.file %}
                    <a href="{% url 'uploader:link_file' resource.file.slug %}">
                {% elif resource.bookmark %}
                    <a href="{% url 'uploader:link_bookmark' resource.bookmark.slug %}">
                {% endif %}
                    <span class="glyphicon glyphicon-link" aria-hidden="true"></span>
                    Add another link</a>
                </li>
                <li><a href="{% url 'uploader:delete_resource' resource.slug %}" onclick="javascript:return confirm('UNLINK this resource? To delete the bookmark, delete it from the files tab')">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    Unlink</a></li>
              </ul>
            </div>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
<!--</div>-->
<div class="row">
    <div class="col-md-12 text-center">
    <ul class="pagination pagination-centered">
        {% if resources.has_previous %}
                <li><a href="?page=1"><<</a></li>
                <li><a href="?page={{ resources.previous_page_number }}"><</a></li>
        {% endif %}
        
        {% for i in resources.paginator.page_range %}
            <li {% if resources.number == i %} class="active" {% endif %}><a href="?page={{i}}">{{i}}</a></li>
        {% endfor %}

        {% if resources.has_next %}
                <li><a href="?page={{ resources.next_page_number }}">></a></li>
                <li><a href="?page={{ resources.paginator.num_pages }}">>></a></li>{% endif %}
    </div>
</div>

<!--{% endif %}-->
{% endblock %}