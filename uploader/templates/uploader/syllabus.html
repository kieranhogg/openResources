{% extends 'uploader/base.html' %}
{% block body_block %}
{% load static %}
<div id="crumbs">
    <a href="{% url 'uploader:index' %}">Home</a> > 
    <a href="{% url 'uploader:subject' syllabus.subject.slug %}">
        {{ syllabus.subject.subject_name|truncatechars:45 }}</a> >
    <a href="{% url 'uploader:syllabuses' syllabus.subject.slug syllabus.exam_level.slug %}">
     {{ syllabus.exam_level.level_name|truncatechars:45 }}</a> >
     {{ syllabus|truncatechars:45 }}
</div>
<h2>{% block head_title %}{{ syllabus }}{% endblock %}</h2>
{% if user.is_authenticated %}
<div class="favourite">
    <p><a class='btn btn-primary' href="{% url 'uploader:add_favourite' 'syllabus' syllabus.slug %}">
            <span class="glyphicon glyphicon-heart-empty" aria-hidden="true"></span>
            Add to favourites
        </a>
    </p>
</div>
{% endif %}
</a>
<div id="syllabus_validity" class="well">
    {% if syllabus.teach_from %}
    <p><strong>First teaching</strong>: {{ syllabus.teach_from|date:"F Y" }}</p>
    {% endif %}
    
    {% if syllabus.teach_until %}
    <p><strong>Last exam</strong>: {{ syllabus.teach_until|date:"F Y" }}</p>
    {% endif %}
    
    {% if syllabus.exam_board.board_name == "National Curriculum" %}
        <p><strong>Syllabus</strong>: {{ syllabus.exam_board }}</p>
        <p><strong>Level</strong>: {{ syllabus.exam_level }}</p>
        <p><strong>Subject</strong>: {{ syllabus.subject }}</p>
    {% else %}
    <p><strong>Exam board</strong>: {{ syllabus.exam_board }}</p>
    <p><strong>Syllabus level</strong>: {{ syllabus.exam_level }}</p>
    {% endif %}
</div>
{% if syllabus.description %}
<div class="well">{{ syllabus.description }}</div>
{% endif %}

{% if syllabus.official_site %}
<p><a href="{{ syllabus.official_site }}">Official site</a></p>
{% endif %}
<h3>Syllabus Resources</h3>
<p>E.g. syllabus schemes of work.</p>
<p>
    <a href="{% url 'uploader:syllabus_resources' syllabus.subject.slug syllabus.exam_level.slug syllabus.slug %}">
        View syllabus resources
    </a>
</p>
{% if syllabus.exam_board.board_name == "National Curriculum" %}
<h3>Years</h3>
{% else %}
<h3>Units</h3>
{% endif %}

{% if units %}
<div id="resource_list">
    <ul>
    {% for unit in units %}
        <li><a href="{% url 'uploader:unit' syllabus.subject.slug syllabus.exam_level.slug syllabus.slug unit.slug %}">{{ unit.title }}</a></li> 
    {% endfor %}
    </ul>
    {% else %}
       <p>No results</p>
    {% endif %}
</div>
{% endblock %}
